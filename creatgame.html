<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="styles.css">
<script src="mild_questions.js"></script>
<script src="script.js"></script>

<div class="container">
  <!-- åˆ›å»ºæ¸¸æˆéƒ¨åˆ† -->
  <div id="createSection">
    <h1 class="title">åˆ›å»ºæ¸¸æˆ</h1>
    
    <div class="form-group">
      <label for="playerCount">æ¸¸æˆäººæ•°</label>
      <select id="playerCount" class="input-field">
        <option value="2">2äºº</option>
        <option value="3">3äºº</option>
        <option value="4">4äºº</option>
        <option value="5">5äºº</option>
        <option value="6" selected>6äºº</option>
        <option value="7">7äºº</option>
        <option value="8">8äºº</option>
        <option value="9">9äºº</option>
      </select>
      <p class="form-hint">æ¨èæ¸¸æˆäººæ•°6-8äºº</p>
    </div>

    <div class="form-group">
      <label>é¢˜ç›®ç±»å‹</label>
      <div class="radio-group">
        <label class="radio-label">
          <input type="radio" name="questionType" value="mild" checked>
          æ¸©å’Œé¢˜ç›®
        </label>
        <label class="radio-label">
          <input type="radio" name="questionType" value="spicy">
          åŠ²çˆ†é¢˜ç›®
        </label>
        <label class="radio-label">
          <input type="radio" name="questionType" value="extreme">
          æ²¡æœ‰ä¸‹é™
        </label>
      </div>
    </div>

    <button class="start-button" onclick="createGame()">å¼€å§‹æ¸¸æˆ</button>
  </div>

  <!-- æˆ¿é—´ä¿¡æ¯éƒ¨åˆ† -->
  <div id="roomSection" style="display: none;">
    <div class="room-info">
      <h1 class="room-number" id="roomNumber">æˆ¿é—´å·ï¼š8888</h1>
      <p class="room-details" id="roomDetails"></p>
    </div>

    <div class="notice">
      <p>åœ¨å…¬ä¼—å·ä¸­å›å¤è¯¥æˆ¿é—´å·ï¼Œå³å¯å¼€å§‹æ¸¸æˆ</p>
      <p class="share-text">å¦‚æœæœ‰ç©å®¶æœªå…³æ³¨è„‘æ´é‡è¡¨åŠ©æ‰‹ï¼Œè¯·å°†è„‘æ´é‡è¡¨åŠ©æ‰‹å¾®ä¿¡å·(top10zhushou)åˆ†äº«ç»™ä½ çš„å¥½å‹ï¼</p>
    </div>
    <!--
    <div class="flip-button-container">
      <button class="flip-button" onclick="openGameResult()">å¼€å§‹ç¿»ç‰Œ</button>
      <p class="form-hint">æŸ¥çœ‹æ¸¸æˆç»“æœ</p>
      <button class="flip-button game-card-button" onclick="openGameCard()">è¿›å…¥æ¸¸æˆå¡ç‰‡</button>
      <p class="form-hint">æŸ¥çœ‹æ¸¸æˆå¡ç‰‡</p>
    </div>
    -->
  </div>

  <!-- æ¸¸æˆç»“æœéƒ¨åˆ† -->
  <div id="resultSection" style="display: none;">
    <h1 class="title">æ¸¸æˆç»“æœ</h1>
    
    <div class="status-container">
      <p id="gameStatus" class="game-status">è¯·ç¿»ç‰Œ</p>
    </div>
    
    <div class="result-container">
      <div id="playerResults"></div>
    </div>
  </div>

  <!-- æ¸¸æˆå¡ç‰‡éƒ¨åˆ† -->
  <div id="gameCardSection" style="display: none;">
    <div class="section-title">æœ¬è½®é¢˜ç›®</div>
    
    <div class="card">
      <div class="question-id" id="questionId"></div>
      <div class="question" id="questionText"></div>
      <div class="scale-label">
        (<strong>1</strong>æ˜¯æœ€<span class="green" id="negativeText"></span>ï¼Œ<strong>10</strong>æ˜¯æœ€<span class="red" id="positiveText"></span>)
      </div>
    </div>

    <div class="section-title" id="playerTitle">1å·ç©å®¶ ä½ çš„å·ç æ˜¯</div>
    <div class="number-card">
      <div class="random-number" id="randomNumber">5</div>
    </div>

    <div class="bottom-bar">
      <div class="emoji">ğŸ’©</div>
      <div class="scale-container">
        <div class="scale-number">1</div>
        <div class="scale-bar">
          <img src="topten.svg" class="topten-logo" alt="TOP TEN">
        </div>
        <div class="scale-number">10</div>
      </div>
      <div class="emoji">ğŸ¦„</div>
    </div>

    <div class="flip-button-container">
      <button class="flip-button" onclick="openGameResult()">å¼€å§‹ç¿»ç‰Œ</button>
      <p class="form-hint">æŸ¥çœ‹æ¸¸æˆç»“æœ</p>
    </div>
  </div>
</div>

<script>
  function testClick() {
    alert('æŒ‰é’®ç‚¹å‡»æˆåŠŸ!');
  }

  function openGameResult() {
    // ä»URLå‚æ•°ä¸­è·å–numbers
    const urlParams = new URLSearchParams(window.location.search);
    const numbers = urlParams.get('numbers');
    
    // æ„å»ºç»“æœé¡µURLï¼Œä½¿ç”¨ç›¸åŒçš„numbers
    const resultUrl = window.location.pathname + '?' + new URLSearchParams({
        players: urlParams.get('players'),
        numbers: numbers,  // ä½¿ç”¨ç›¸åŒçš„numbers
        section: 'result'
    }).toString();
    
    window.location.href = resultUrl;
  }
</script>
