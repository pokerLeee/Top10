<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="styles.css">
<script src="mild_questions.js"></script>
<script src="script.js"></script>

<div class="container">
  <!-- 创建游戏部分 -->
  <div id="createSection">
    <h1 class="title">创建游戏</h1>
    
    <div class="form-group">
      <label for="playerCount">游戏人数</label>
      <select id="playerCount" class="input-field">
        <option value="2">2人</option>
        <option value="3">3人</option>
        <option value="4">4人</option>
        <option value="5">5人</option>
        <option value="6" selected>6人</option>
        <option value="7">7人</option>
        <option value="8">8人</option>
        <option value="9">9人</option>
      </select>
      <p class="form-hint">推荐游戏人数6-8人</p>
    </div>

    <div class="form-group">
      <label>题目类型</label>
      <div class="radio-group">
        <label class="radio-label">
          <input type="radio" name="questionType" value="mild" checked>
          温和题目
        </label>
        <label class="radio-label">
          <input type="radio" name="questionType" value="spicy">
          劲爆题目
        </label>
        <label class="radio-label">
          <input type="radio" name="questionType" value="extreme">
          没有下限
        </label>
      </div>
    </div>

    <button class="start-button" onclick="createGame()">开始游戏</button>
  </div>

  <!-- 房间信息部分 -->
  <div id="roomSection" style="display: none;">
    <div class="room-info">
      <h1 class="room-number" id="roomNumber">房间号：8888</h1>
      <p class="room-details" id="roomDetails"></p>
    </div>

    <div class="notice">
      <p>在公众号中回复该房间号，即可开始游戏</p>
      <p class="share-text">如果有玩家未关注脑洞量表助手，请将脑洞量表助手微信号(top10zhushou)分享给你的好友！</p>
    </div>
    <!--
    <div class="flip-button-container">
      <button class="flip-button" onclick="openGameResult()">开始翻牌</button>
      <p class="form-hint">查看游戏结果</p>
      <button class="flip-button game-card-button" onclick="openGameCard()">进入游戏卡片</button>
      <p class="form-hint">查看游戏卡片</p>
    </div>
    -->
  </div>

  <!-- 游戏结果部分 -->
  <div id="resultSection" style="display: none;">
    <h1 class="title">游戏结果</h1>
    
    <div class="status-container">
      <p id="gameStatus" class="game-status">请翻牌</p>
    </div>
    
    <div class="result-container">
      <div id="playerResults"></div>
    </div>
  </div>

  <!-- 游戏卡片部分 -->
  <div id="gameCardSection" style="display: none;">
    <div class="section-title">本轮题目</div>
    
    <div class="card">
      <div class="question-id" id="questionId"></div>
      <div class="question" id="questionText"></div>
      <div class="scale-label">
        (<strong>1</strong>是最<span class="green" id="negativeText"></span>，<strong>10</strong>是最<span class="red" id="positiveText"></span>)
      </div>
    </div>

    <div class="section-title" id="playerTitle">1号玩家 你的号码是</div>
    <div class="number-card">
      <div class="random-number" id="randomNumber">5</div>
    </div>

    <div class="bottom-bar">
      <div class="emoji">💩</div>
      <div class="scale-container">
        <div class="scale-number">1</div>
        <div class="scale-bar">
          <img src="topten.svg" class="topten-logo" alt="TOP TEN">
        </div>
        <div class="scale-number">10</div>
      </div>
      <div class="emoji">🦄</div>
    </div>

    <div class="flip-button-container">
      <button class="flip-button" onclick="openGameResult()">开始翻牌</button>
      <p class="form-hint">查看游戏结果</p>
    </div>
  </div>
</div>

<script>
  function testClick() {
    alert('按钮点击成功!');
  }

  function openGameResult() {
    // 从URL参数中获取numbers
    const urlParams = new URLSearchParams(window.location.search);
    const numbers = urlParams.get('numbers');
    
    // 构建结果页URL，使用相同的numbers
    const resultUrl = window.location.pathname + '?' + new URLSearchParams({
        players: urlParams.get('players'),
        numbers: numbers,  // 使用相同的numbers
        section: 'result'
    }).toString();
    
    window.location.href = resultUrl;
  }
</script>
